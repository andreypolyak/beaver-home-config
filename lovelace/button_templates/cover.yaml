cover_device:
  template: base_icon
  triggers_update:
    - input_boolean.bedroom_cover_active
    - input_boolean.kitchen_cover_active
    - input_boolean.living_room_cover_active
  icon: >
    [[[
      if (states["cover." + variables.room + "_cover"].attributes.position < 100) {
        return "mdi:blinds";
      } else {
        return "mdi:blinds-open";
      }
    ]]]
  hold_action:
    action: more-info
    haptic: success
  tap_action:
    action: toggle
    haptic: success
  state:
    - value: >
        [[[ return states["input_boolean." + variables.room + "_cover_active"].state == "on"; ]]]
      operator: template
      color: var(--paper-item-icon-active-color)
    - value: >
        [[[ return states["input_boolean." + variables.room + "_cover_active"].state != "on"; ]]]
      operator: template
      color: var(--paper-card-background-color)
  variables:
    room: ""

cover_base:
  show_label: false
  show_icon: false
  color_type: card
  styles:
    card:
      - height: 48px

cover_open:
  template: cover_base
  tap_action:
    action: call-service
    service: cover.set_cover_position
    service_data:
      entity_id: >
        [[[ return "cover." + variables.room + "_cover"; ]]]
      position: 100
    haptic: success
  state:
    - value: >
        [[[ return states["cover." + variables.room + "_cover"].attributes.position == 100; ]]]
      operator: template
      color: var(--paper-item-icon-active-color)
    - value: >
        [[[ return states["cover." + variables.room + "_cover"].attributes.position != 100; ]]]
      operator: template
      color: var(--paper-card-background-color)
  name: Open
  variables:
    room: ""

cover_close:
  template: cover_base
  tap_action:
    action: call-service
    service: cover.set_cover_position
    service_data:
      entity_id: >
        [[[ return "cover." + variables.room + "_cover"; ]]]
      position: 0
    haptic: success
  state:
    - value: >
        [[[ return states["cover." + variables.room + "_cover"].attributes.position == 0; ]]]
      operator: template
      color: var(--paper-item-icon-active-color)
    - value: >
        [[[ return states["cover." + variables.room + "_cover"].attributes.position != 0; ]]]
      operator: template
      color: var(--paper-card-background-color)
  name: Close
  variables:
    room: ""

kitchen_cover_ventilation:
  template: cover_base
  tap_action:
    action: call-service
    service: cover.set_cover_position
    service_data:
      entity_id: >
        [[[ return "cover." + variables.room + "_cover"; ]]]
      position: 30
    haptic: success
  state:
    - value: >
        [[[ return states["cover." + variables.room + "_cover"].attributes.position == 30; ]]]
      operator: template
      color: var(--paper-item-icon-active-color)
    - value: >
        [[[ return states["cover." + variables.room + "_cover"].attributes.position != 30; ]]]
      operator: template
      color: var(--paper-card-background-color)
  name: Ventilation
  variables:
    room: ""

bedroom_cover_ventilation:
  template: cover_base
  tap_action:
    action: call-service
    service: cover.set_cover_position
    service_data:
      entity_id: >
        [[[ return "cover." + variables.room + "_cover" ]]]
      position: 15
    haptic: success
  state:
    - value: >
        [[[ return states["cover." + variables.room + "_cover"].attributes.position == 15; ]]]
      operator: template
      color: var(--paper-item-icon-active-color)
    - value: >
        [[[ return states["cover." + variables.room + "_cover"].attributes.position != 15; ]]]
      operator: template
      color: var(--paper-card-background-color)
  name: Ventilation
  variables:
    room: ""
