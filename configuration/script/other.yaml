fire_custom_event:
  fields:
    custom_event_data:
      description: custom_event_data
      example: custom_event_data
    custom_event_data2:
      description: custom_event_data2
      example: custom_event_data2
  sequence:
    - event: custom_event
      event_data_template:
        custom_event_data: "{{ custom_event_data }}"
        custom_event_data2: "{{ custom_event_data2|default(none) }}"

snapshot_send:
  sequence:
    - service: camera.snapshot
      data:
        entity_id: camera.living_room_camera
        filename: www/snapshot.jpg
    - service: notify.beaver_stream
      data:
        message: ""
        data:
          photo:
            - file: /config/www/snapshot.jpg
    - service: script.fire_custom_event
      data:
        custom_event_data: delete_snapshot

backup:
  sequence:
    - service: hassio.snapshot_partial
      data_template:
        name: "{{ now().strftime('%Y_%m_%d') }}_hassio"
        password: !secret script_backup_password
        addons: 
          - a0d7b954_appdaemon
          - core_duckdns
          - 7ad98f9c_zigbee2mqtt
          - 7ad98f9c_zigbee2mqtt_edge
          - cebe7a76_hassio_google_drive_backup
          - a0d7b954_portainer
          - core_nginx_proxy
          - a0d7b954_grafana
        folders:
          - homeassistant
          - share
          - ssl
          - addons/local
